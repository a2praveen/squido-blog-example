<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Interface with Arduino board using Node.Js</title>
    <meta name="description" itemprop="description" content="Using Nodejs to interface with an Arduino board to turn on lights and more" />
    <link rel="canonical" href="http://localhost:4965/interface-with-arduino-board-using-node-js" />
    <meta property="og:title" content="Interface with Arduino board using Node.Js" />
    <meta property="og:description" content="Using Nodejs to interface with an Arduino board to turn on lights and more" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="http://localhost:4965/interface-with-arduino-board-using-node-js" />
    <meta property="og:site_name" content="squido" />
    <meta name="twitter:card" value="summary" />
    <meta name="twitter:url" value="http://localhost:4965/interface-with-arduino-board-using-node-js" />
    <meta name="twitter:title" value="Interface with Arduino board using Node.Js" />
    <meta name="twitter:description" value="Using Nodejs to interface with an Arduino board to turn on lights and more" />
    <meta name="twitter:site" value="@mrvautin" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.0-beta2/css/bootstrap.min.css" integrity="sha512-aqT9YD5gLuLBr6ipQAS+72o5yHKzgZbGxEh6iY8lW/r6gG14e2kBTAJb8XrxzZrMOgSmDqtLaF76T0Z6YY2IHg==" crossorigin="anonymous" />
    <link rel="stylesheet" href="/content/stylesheets/style.css">
    <script src="/content/javascripts/site.js"></script>
  </head>
  <body>
    <header class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm">
        <p class="h5 my-0 me-md-auto brand"><a href="/">mrvautin</a></p>
        <nav class="my-2 my-md-0 me-md-3">
            <a class="p-2 text-dark" href="/">Home</a>
        </nav>
    </header>
    <main class="container">
      <div class="row">
    <div class="col-md-8 offset-md-2 mb-5">
        <div class="mt-5">
            <h1>Interface with Arduino board using Node.Js</h1>
            <hr>
<p>There are many cheap and solid Arduino compatible boards on the market which can be interfaced/controlled using Node.Js. Today we are going to focus on the <a href="https://www.banggood.com/custlink/DGmR9hq9DQ">WeMos D1 R2 board</a> which can be purchased <a href="https://www.banggood.com/custlink/DGmR9hq9DQ">here</a>.
,.,.</p>
<p><img src="/content/images/2021/01/a2958102-5e39-4700-aab8-d56d49e67ab2-2.png" alt="a2958102-5e39-4700-aab8-d56d49e67ab2-2"></p>
<p>This guide assumes you know your way around Node.Js and have it installed along with NPM.</p>
<p>Firsly you are going to want to setup your board in the Arduino IDE. We will be flashing some simple Wifi firmware to get it on your Wireless network then we can talk to it using Node.Js.</p>
<ol>
<li>
<p>Select the board in the Arduino IDE:</p>
<p><code>Tools &gt; Board &gt; ESP8266 Boards &gt; WeMos D1 R2</code></p>
</li>
<li>
<p>Plugin your board using a USB cable</p>
</li>
<li>
<p>Open the Wifi firmware:</p>
<p><code>File &gt; Examples &gt; Firmata &gt; StandardFirmataWifi</code></p>
</li>
<li>
<p>You are going to need to setup your Wifi SSID and Passphrase in the <code>WifiConfig.h</code> file. You shouldn't need to touch the <code>StandardFirmataWifi.h</code> file at all.</p>
</li>
<li>
<p>Scroll to the section which has the Wifi SSID configuration and enter the name of your Wifi network (SSID):</p>
<pre><code class="language-c++">    // replace this with your wireless network SSID
    char ssid[] = &quot;your_network_name&quot;;
</code></pre>
</li>
<li>
<p>Scroll to the section which has the Security configuration and enter your passphrase or Wifi password:</p>
<pre><code class="language-c++">    #ifdef WIFI_WPA_SECURITY
    char wpa_passphrase[] = &quot;your_wpa_passphrase&quot;;
    #endif //WIFI_WPA_SECURITY
</code></pre>
</li>
<li>
<p>Thats it. You can now compile and upload the code to your board using the <code>Upload</code> button</p>
</li>
<li>
<p>Once that is complete, your board will reset and hopefully connect to your Wifi network.</p>
</li>
<li>
<p>You can now login to your router to check the Wireless clients and determine the IP address of your board. At this point you might like to reserve an IP address using the MAC address for your board so it doesn't change on restart and kill your Node.Js code.</p>
</li>
<li>
<p>Now we are going to setup our Node.Js code to do some simple requests/commands.</p>
<p>Install our dependencies<br>
<code>npm i etherport-client johnny-five --save</code></p>
</li>
<li>
<p>Your <code>package.json</code> should look something like this:</p>
<pre><code class="language-json">{
    &quot;name&quot;: &quot;nodejs-test&quot;,
    &quot;version&quot;: &quot;1.0.0&quot;,
    &quot;description&quot;: &quot;&quot;,
    &quot;main&quot;: &quot;index.js&quot;,
    &quot;author&quot;: &quot;&quot;,
    &quot;license&quot;: &quot;ISC&quot;,
    &quot;dependencies&quot;: {
        &quot;etherport-client&quot;: &quot;^0.1.4&quot;,
        &quot;johnny-five&quot;: &quot;^2.0.0&quot;
    }
}
</code></pre>
</li>
<li>
<p>Now to our Node.Js code. We are going to make the little blue light flash which sits next to the silver <code>WeMos</code> chip on our board:</p>
<blockquote>
<p>You will need to change the IP address to the one you found in step 9.</p>
</blockquote>
<pre><code class="language-javascript">
    const { EtherPortClient } = require('etherport-client');
    const { Board, Led } = require('johnny-five');
    
    const board = new Board({
        port: new EtherPortClient({
            host: '192.168.0.201',
            port: 3030
        }),
        repl: false
    });
    
    const LED_PIN = 2;
    
    board.on('ready', () =&gt; {
        console.log('Board ready');
        var led = new Led(LED_PIN);
        led.blink();
    });
</code></pre>
</li>
<li>
<p>Now run your code and check the output in the console and the light action on your board.</p>
<p>You should see some output like this:</p>
<pre><code class="language-bash">    1610519728478 SerialPort Connecting to host:port: 192.168.0.201:3030
    1610519728496 Connected Connecting to host:port: 192.168.0.201:3030
    Board ready
</code></pre>
</li>
</ol>
<p>And some light action here:<br>
<img src="/content/images/2021/01/IMG_0809.png" alt="IMG_0809"></p>

        </div>
    </div>
</div>
    </main>
    <footer class="footer mt-5 py-3 bg-light">
        <div class="container text-center">
            <span class="text-muted">mrvautin</span>
        </div>
    </footer>
  </body>
</html>