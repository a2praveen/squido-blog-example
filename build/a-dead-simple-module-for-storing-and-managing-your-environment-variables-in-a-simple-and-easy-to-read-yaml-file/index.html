<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>A dead simple module for storing and managing your environment variables in a simple and easy to read yaml file</title>
    <meta name="description" itemprop="description" content="A dead simple Nodejs module for managing your environments" />
    <link rel="canonical" href="http://localhost:4965/a-dead-simple-module-for-storing-and-managing-your-environment-variables-in-a-simple-and-easy-to-read-yaml-file" />
    <meta property="og:title" content="A dead simple module for storing and managing your environment variables in a simple and easy to read yaml file" />
    <meta property="og:description" content="A dead simple Nodejs module for managing your environments" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="http://localhost:4965/a-dead-simple-module-for-storing-and-managing-your-environment-variables-in-a-simple-and-easy-to-read-yaml-file" />
    <meta property="og:site_name" content="squido" />
    <meta name="twitter:card" value="summary" />
    <meta name="twitter:url" value="http://localhost:4965/a-dead-simple-module-for-storing-and-managing-your-environment-variables-in-a-simple-and-easy-to-read-yaml-file" />
    <meta name="twitter:title" value="A dead simple module for storing and managing your environment variables in a simple and easy to read yaml file" />
    <meta name="twitter:description" value="A dead simple Nodejs module for managing your environments" />
    <meta name="twitter:site" value="@mrvautin" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.0-beta2/css/bootstrap.min.css" integrity="sha512-aqT9YD5gLuLBr6ipQAS+72o5yHKzgZbGxEh6iY8lW/r6gG14e2kBTAJb8XrxzZrMOgSmDqtLaF76T0Z6YY2IHg==" crossorigin="anonymous" />
    <link rel="stylesheet" href="/content/stylesheets/style.css">
    <script src="/content/javascripts/site.js"></script>
  </head>
  <body>
    <header class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm">
        <p class="h5 my-0 me-md-auto brand"><a href="/">mrvautin</a></p>
        <nav class="my-2 my-md-0 me-md-3">
            <a class="p-2 text-dark" href="/">Home</a>
        </nav>
    </header>
    <main class="container">
      <div class="row">
    <div class="col-md-8 offset-md-2 mb-5">
        <div class="mt-5">
            <h1>A dead simple module for storing and managing your environment variables in a simple and easy to read yaml file</h1>
            <hr>
<p>Managing your environment variable in your different environments can be a pain. The idea behind <code>envz</code> is that this process is made super simple and easy to understand leading to less mistakes.</p>
<pre><code class="language-bash"># with npm
npm install envz

# or with Yarn
yarn add envz
</code></pre>
<p>dsds</p>
<p>Repo: <a href="https://github.com/mrvautin/envz">https://github.com/mrvautin/envz</a></p>
<h2>Usage</h2>
<p>You should use <code>envz</code> as early on in the entry point of your app as possible. Eg: <code>app.js</code> or <code>index.js</code> file which loads your app.</p>
<p>Rather than override <code>process.env.x</code> object, <code>envz</code> will return a new object to use throughout your app.</p>
<pre><code class="language-javascript">const { envz } = require('envz');
</code></pre>
<p>Create a <code>env.yaml</code> or any other named file and load it:</p>
<pre><code class="language-javascript">const env = envz('env.yaml');
</code></pre>
<h2>env YAML file structure</h2>
<p>The idea is that the <code>process.env</code> will be merged with loaded <code>yaml</code> file.</p>
<p><code>env</code> uses a cascading (sequential order) configuration method which is easier to understand looking at an example.</p>
<pre><code class="language-yaml">base:
  PORT: 1234
  config:
    default: test

development:
  PORT: 3000
  DATABASE: dev
  config:
    token: 12345
    secret: fwdsdgl

production:
  PORT: 80
  DATABASE: prod
  config:
    token: 67890
    key: puwndklf
    truthy: true
    allowed:
      - card
      - phone
</code></pre>
<p>The idea here is that the values in <code>base</code> are loaded, anything in <code>development</code> overrides that and finally <code>production</code> overrides that depending on the <code>NODE_ENV</code> set.</p>
<p>For example, when a <code>NODE_ENV</code> of <code>development</code> is set the following <code>env</code> object is returned:</p>
<pre><code>PORT: 3000,
config: { 
    default: 'test', 
    token: 12345, 
    secret: 'fwdsdgl' 
},
DATABASE: 'dev'
...
</code></pre>
<p>Eg: Where the <code>PORT</code> of 3000 from <code>development</code> overrides the <code>base</code> setting of 1234. If the <code>NODE_ENV</code> is set to <code>production</code>, then the <code>PORT</code> will be set to 80.</p>
<p>The idea behind <code>base</code> (or whatever you want to call it) is that you don't need to redefine defaults over and over for each environment.</p>
<h2>Options</h2>
<p>You can set the environment manually rather than using <code>NODE_ENV</code> by adding an <code>environment</code> object. Eg:</p>
<pre><code class="language-javascript">const env = envz('env.yaml', { environment: 'production' });
</code></pre>
<p>By default the values set in <code>process.env</code> overrides what is set in your yaml file. You can change this so that the yaml file is king by adding the following flag:</p>
<pre><code class="language-javascript">const env = envz('env.yaml', { yamlFileOverride: true });
</code></pre>
<h2>Save / Update config</h2>
<p>Sometimes you may want to store changes back to your <code>envz</code> config. You can easily do this by importing <code>save</code>:</p>
<pre><code class="language-javascript">const { save } = require('envz');
</code></pre>
<p>The <code>save</code> method takes an object with two values:</p>
<ul>
<li><code>envfile</code>: The yaml file you are wanting to update</li>
<li><code>data</code>: The object you want to update back to the file. See tests and example below.</li>
</ul>
<pre><code class="language-javascript">// In this case we will be adding to the `base` config but you can easily
// replace `base` with `production` or whatever environment.
const saveObj = await save({
    envfile: 'test.yaml',
    data: {
      base: {
        config: {
            default: 'default-key'
        }
      }
    }
});
</code></pre>
<p>This will result in the <code>test.yaml</code> being updated:</p>
<pre><code class="language-yaml">base:
  PORT: 1234
  config:
    default: default-key
...
</code></pre>

        </div>
    </div>
</div>
    </main>
    <footer class="footer mt-5 py-3 bg-light">
        <div class="container text-center">
            <span class="text-muted">mrvautin</span>
        </div>
    </footer>
  </body>
</html>